<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang="page-title">æ™ºèƒ½çŸ¥è¯†å›¾è°± - Multi-Agent DSL Framework</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            transition: all 0.3s ease;
        }

        .header {
            background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            color: white;
            padding: 1rem 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
            list-style: none;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .nav-links a:hover, .nav-links a.active {
            background: rgba(255,255,255,0.2);
            transform: translateY(-1px);
        }

        .lang-switch {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border: none;
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .lang-switch:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        .main-container {
            margin-top: 90px;
            padding: 2rem;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }

        .section-card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 24px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 25px 80px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .section-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 35px 100px rgba(0,0,0,0.15);
        }

        .section-title {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: #1e40af;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .section-subtitle {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            padding: 1.25rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            border-left: 4px solid #3b82f6;
            color: #1e40af;
            font-weight: 600;
        }

        .controls-panel {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .btn-primary { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; }
        .btn-secondary { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; }
        .btn-accent { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; }
        .btn-info { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; }

        .graph-container {
            background: #1a1a1a;
            border-radius: 16px;
            padding: 1.5rem;
            margin: 2rem 0;
            position: relative;
            min-height: 600px;
            overflow: hidden;
            border: 2px solid #374151;
        }

        #knowledge-graph {
            width: 100%;
            height: 600px;
            border-radius: 12px;
        }

        .legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            min-width: 200px;
        }

        .legend h4 {
            color: #1e40af;
            margin-bottom: 0.75rem;
            font-size: 1rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            padding: 1.5rem;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            border: 1px solid #f1f5f9;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 40px rgba(0,0,0,0.12);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: #64748b;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .insights-panel {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 2px solid #10b981;
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .insights-title {
            color: #065f46;
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .insight-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            border-left: 4px solid #10b981;
            transition: all 0.3s ease;
        }

        .insight-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.2);
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .controls-panel {
                justify-content: center;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .legend {
                position: relative;
                top: 0;
                right: 0;
                margin-top: 1rem;
            }
        }

        /* èŠ‚ç‚¹å’Œè¾¹çš„æ ·å¼ */
        .node {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .node:hover {
            filter: brightness(1.2);
        }

        .node-text {
            font-weight: 600;
            font-size: 12px;
            fill: #333;
            text-anchor: middle;
            pointer-events: none;
        }

        .link {
            stroke-width: 2;
            opacity: 0.7;
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 0.75rem;
            border-radius: 8px;
            font-size: 0.85rem;
            pointer-events: none;
            z-index: 1000;
            max-width: 200px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                <span>ğŸ§ </span>
                <span data-lang="site-title">Multi-Agent DSL Framework</span>
            </div>
            <nav>
                <ul class="nav-links">
                    <li><a href="../" data-lang="nav-home"><i class="fas fa-home"></i><span>é¦–é¡µ</span></a></li>
                    <li><a href="../react.html" data-lang="nav-platform"><i class="fas fa-desktop"></i><span>æŠ€æœ¯å¹³å°</span></a></li>
                    <li><a href="../dsl-demo/" data-lang="nav-dsl"><i class="fas fa-code"></i><span>DSLæ¼”ç¤º</span></a></li>
                    <li><a href="#" class="active" data-lang="nav-knowledge"><i class="fas fa-project-diagram"></i><span>çŸ¥è¯†å›¾è°±</span></a></li>
                </ul>
            </nav>
            <button class="lang-switch" onclick="toggleLanguage()">
                <span>ğŸŒ</span>
                <span id="current-lang" data-lang="lang-switch">English</span>
            </button>
        </div>
    </header>

    <div class="main-container">
        <div class="section-card">
            <h1 class="section-title">
                <span>ğŸ§ </span>
                <span data-lang="main-title">è®ºæ–‡æ ¸å¿ƒçŸ¥è¯†å›¾è°±</span>
            </h1>

            <div class="section-subtitle">
                <strong data-lang="subtitle-main">å¤šæ™ºèƒ½ä½“DSLæ¡†æ¶æ ¸å¿ƒç®—æ³•æ¶æ„</strong> -
                <span data-lang="subtitle-desc">ATSLPè‡ªé€‚åº”ä»»åŠ¡è°ƒåº¦ã€HCMPLå±‚æ¬¡åŒ–åä½œã€CALKåä½œæ„ŸçŸ¥å­¦ä¹ çš„å®Œæ•´çŸ¥è¯†ä½“ç³»</span>
            </div>

            <div class="controls-panel">
                <button class="btn btn-primary" onclick="showFullFramework()">
                    <span>ğŸ”„</span>
                    <span data-lang="btn-full">å®Œæ•´æ¡†æ¶è§†å›¾</span>
                </button>
                <button class="btn btn-secondary" onclick="showATSLP()">
                    <span>âš¡</span>
                    <span data-lang="btn-atslp">ATSLPè°ƒåº¦å¼•æ“</span>
                </button>
                <button class="btn btn-accent" onclick="showHCMPL()">
                    <span>ğŸ¤</span>
                    <span data-lang="btn-hcmpl">HCMPLåä½œæœºåˆ¶</span>
                </button>
                <button class="btn btn-info" onclick="showCALK()">
                    <span>ğŸ§ </span>
                    <span data-lang="btn-calk">CALKå­¦ä¹ å†…æ ¸</span>
                </button>
            </div>

            <div class="graph-container">
                <svg id="knowledge-graph"></svg>
                <div class="legend">
                    <h4 data-lang="legend-title">å›¾ä¾‹</h4>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #3b82f6;"></div>
                        <span data-lang="legend-core">æ ¸å¿ƒç®—æ³•</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #10b981;"></div>
                        <span data-lang="legend-component">åŠŸèƒ½ç»„ä»¶</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #f59e0b;"></div>
                        <span data-lang="legend-agent">æ™ºèƒ½ä½“</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #8b5cf6;"></div>
                        <span data-lang="legend-interface">æ¥å£å±‚</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ef4444;"></div>
                        <span data-lang="legend-data">æ•°æ®æµ</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="total-nodes">42</div>
                <div class="stat-label" data-lang="stat-nodes">çŸ¥è¯†èŠ‚ç‚¹</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="total-relations">78</div>
                <div class="stat-label" data-lang="stat-relations">å…³ç³»è¿æ¥</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="algorithm-count">3</div>
                <div class="stat-label" data-lang="stat-algorithms">æ ¸å¿ƒç®—æ³•</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="complexity-score">96%</div>
                <div class="stat-label" data-lang="stat-coverage">æ¶æ„è¦†ç›–åº¦</div>
            </div>
        </div>

        <div class="insights-panel">
            <h3 class="insights-title">
                <span>ğŸ’¡</span>
                <span data-lang="insights-title">æ ¸å¿ƒæ¶æ„æ´å¯Ÿ</span>
            </h3>
            <div class="insight-item">
                <strong data-lang="insight1-title">ATSLPè‡ªé€‚åº”è°ƒåº¦å¼•æ“</strong>
                <p data-lang="insight1-desc">åŸºäºä»»åŠ¡å¤æ‚åº¦å’Œèµ„æºçŠ¶æ€çš„åŠ¨æ€è°ƒåº¦ç®—æ³•ï¼Œå®ç°æœ€ä¼˜è´Ÿè½½åˆ†é…å’Œæ€§èƒ½ä¼˜åŒ–</p>
            </div>
            <div class="insight-item">
                <strong data-lang="insight2-title">HCMPLå±‚æ¬¡åŒ–åä½œæœºåˆ¶</strong>
                <p data-lang="insight2-desc">å¤šå±‚çº§æ™ºèƒ½ä½“åä½œæ¶æ„ï¼Œé€šè¿‡å±‚æ¬¡åŒ–ç®¡ç†å®ç°å¤§è§„æ¨¡æ™ºèƒ½ä½“ç³»ç»Ÿçš„é«˜æ•ˆåè°ƒ</p>
            </div>
            <div class="insight-item">
                <strong data-lang="insight3-title">CALKåä½œæ„ŸçŸ¥å­¦ä¹ </strong>
                <p data-lang="insight3-desc">åˆ†å¸ƒå¼å­¦ä¹ æ¡†æ¶ï¼Œæ”¯æŒæ™ºèƒ½ä½“é—´çš„çŸ¥è¯†å…±äº«ã€ç»éªŒè¿ç§»å’Œåä½œä¼˜åŒ–</p>
            </div>
            <div class="insight-item">
                <strong data-lang="insight4-title">DSLé¢†åŸŸç‰¹å®šè¯­è¨€</strong>
                <p data-lang="insight4-desc">å£°æ˜å¼æ™ºèƒ½ä½“é…ç½®è¯­è¨€ï¼Œç®€åŒ–å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„å¼€å‘ã€éƒ¨ç½²å’Œç»´æŠ¤</p>
            </div>
        </div>
    </div>

    <script>
        // å¤šè¯­è¨€æ”¯æŒ
        const languages = {
            'zh': {
                'page-title': 'æ™ºèƒ½çŸ¥è¯†å›¾è°± - Multi-Agent DSL Framework',
                'site-title': 'Multi-Agent DSL Framework',
                'nav-home': 'é¦–é¡µ',
                'nav-platform': 'æŠ€æœ¯å¹³å°',
                'nav-dsl': 'DSLæ¼”ç¤º',
                'nav-knowledge': 'çŸ¥è¯†å›¾è°±',
                'lang-switch': 'English',
                'main-title': 'è®ºæ–‡æ ¸å¿ƒçŸ¥è¯†å›¾è°±',
                'subtitle-main': 'å¤šæ™ºèƒ½ä½“DSLæ¡†æ¶æ ¸å¿ƒç®—æ³•æ¶æ„',
                'subtitle-desc': 'ATSLPè‡ªé€‚åº”ä»»åŠ¡è°ƒåº¦ã€HCMPLå±‚æ¬¡åŒ–åä½œã€CALKåä½œæ„ŸçŸ¥å­¦ä¹ çš„å®Œæ•´çŸ¥è¯†ä½“ç³»',
                'btn-full': 'å®Œæ•´æ¡†æ¶è§†å›¾',
                'btn-atslp': 'ATSLPè°ƒåº¦å¼•æ“',
                'btn-hcmpl': 'HCMPLåä½œæœºåˆ¶',
                'btn-calk': 'CALKå­¦ä¹ å†…æ ¸',
                'legend-title': 'å›¾ä¾‹',
                'legend-core': 'æ ¸å¿ƒç®—æ³•',
                'legend-component': 'åŠŸèƒ½ç»„ä»¶',
                'legend-agent': 'æ™ºèƒ½ä½“',
                'legend-interface': 'æ¥å£å±‚',
                'legend-data': 'æ•°æ®æµ',
                'stat-nodes': 'çŸ¥è¯†èŠ‚ç‚¹',
                'stat-relations': 'å…³ç³»è¿æ¥',
                'stat-algorithms': 'æ ¸å¿ƒç®—æ³•',
                'stat-coverage': 'æ¶æ„è¦†ç›–åº¦',
                'insights-title': 'æ ¸å¿ƒæ¶æ„æ´å¯Ÿ',
                'insight1-title': 'ATSLPè‡ªé€‚åº”è°ƒåº¦å¼•æ“',
                'insight1-desc': 'åŸºäºä»»åŠ¡å¤æ‚åº¦å’Œèµ„æºçŠ¶æ€çš„åŠ¨æ€è°ƒåº¦ç®—æ³•ï¼Œå®ç°æœ€ä¼˜è´Ÿè½½åˆ†é…å’Œæ€§èƒ½ä¼˜åŒ–',
                'insight2-title': 'HCMPLå±‚æ¬¡åŒ–åä½œæœºåˆ¶',
                'insight2-desc': 'å¤šå±‚çº§æ™ºèƒ½ä½“åä½œæ¶æ„ï¼Œé€šè¿‡å±‚æ¬¡åŒ–ç®¡ç†å®ç°å¤§è§„æ¨¡æ™ºèƒ½ä½“ç³»ç»Ÿçš„é«˜æ•ˆåè°ƒ',
                'insight3-title': 'CALKåä½œæ„ŸçŸ¥å­¦ä¹ ',
                'insight3-desc': 'åˆ†å¸ƒå¼å­¦ä¹ æ¡†æ¶ï¼Œæ”¯æŒæ™ºèƒ½ä½“é—´çš„çŸ¥è¯†å…±äº«ã€ç»éªŒè¿ç§»å’Œåä½œä¼˜åŒ–',
                'insight4-title': 'DSLé¢†åŸŸç‰¹å®šè¯­è¨€',
                'insight4-desc': 'å£°æ˜å¼æ™ºèƒ½ä½“é…ç½®è¯­è¨€ï¼Œç®€åŒ–å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„å¼€å‘ã€éƒ¨ç½²å’Œç»´æŠ¤'
            },
            'en': {
                'page-title': 'Intelligent Knowledge Graph - Multi-Agent DSL Framework',
                'site-title': 'Multi-Agent DSL Framework',
                'nav-home': 'Home',
                'nav-platform': 'Tech Platform',
                'nav-dsl': 'DSL Demo',
                'nav-knowledge': 'Knowledge Graph',
                'lang-switch': 'ä¸­æ–‡',
                'main-title': 'Core Paper Knowledge Graph',
                'subtitle-main': 'Multi-Agent DSL Framework Core Algorithm Architecture',
                'subtitle-desc': 'Complete knowledge system of ATSLP adaptive task scheduling, HCMPL hierarchical collaboration, CALK collaborative awareness learning',
                'btn-full': 'Full Framework View',
                'btn-atslp': 'ATSLP Scheduler',
                'btn-hcmpl': 'HCMPL Collaboration',
                'btn-calk': 'CALK Learning',
                'legend-title': 'Legend',
                'legend-core': 'Core Algorithms',
                'legend-component': 'Components',
                'legend-agent': 'Agents',
                'legend-interface': 'Interfaces',
                'legend-data': 'Data Flow',
                'stat-nodes': 'Knowledge Nodes',
                'stat-relations': 'Relations',
                'stat-algorithms': 'Core Algorithms',
                'stat-coverage': 'Architecture Coverage',
                'insights-title': 'Core Architecture Insights',
                'insight1-title': 'ATSLP Adaptive Task Scheduler',
                'insight1-desc': 'Dynamic scheduling algorithm based on task complexity and resource status, achieving optimal load distribution and performance optimization',
                'insight2-title': 'HCMPL Hierarchical Collaboration',
                'insight2-desc': 'Multi-level agent collaboration architecture, achieving efficient coordination of large-scale agent systems through hierarchical management',
                'insight3-title': 'CALK Collaborative Awareness Learning',
                'insight3-desc': 'Distributed learning framework supporting knowledge sharing, experience transfer and collaborative optimization among agents',
                'insight4-title': 'DSL Domain-Specific Language',
                'insight4-desc': 'Declarative agent configuration language, simplifying development, deployment and maintenance of multi-agent systems'
            }
        };

        let currentLang = 'zh';

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeKnowledgeGraph();
            updateLanguage();
        });

        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            updateLanguage();

            const langBtn = document.getElementById('current-lang');
            langBtn.textContent = languages[currentLang]['lang-switch'];

            // æ›´æ–°é¡µé¢æ ‡é¢˜
            document.title = languages[currentLang]['page-title'];
        }

        function updateLanguage() {
            const elements = document.querySelectorAll('[data-lang]');
            elements.forEach(element => {
                const key = element.getAttribute('data-lang');
                if (languages[currentLang] && languages[currentLang][key]) {
                    if (element.innerHTML.includes('<')) {
                        // å¦‚æœåŒ…å«HTMLï¼Œä¿ç•™ç»“æ„
                        const textPart = element.querySelector('span') || element;
                        textPart.textContent = languages[currentLang][key];
                    } else {
                        element.textContent = languages[currentLang][key];
                    }
                }
            });
        }

        // è®ºæ–‡æ ¸å¿ƒçŸ¥è¯†å›¾è°±æ•°æ® - çœŸå®åæ˜ ATSLPã€HCMPLã€CALKæ¶æ„
        const paperKnowledgeData = {
            nodes: [
                // æ ¸å¿ƒç®—æ³•å±‚
                { id: 'ATSLP', name: 'ATSLPè°ƒåº¦å¼•æ“', category: 'core', description: 'è‡ªé€‚åº”ä»»åŠ¡è°ƒåº¦ä¸è´Ÿè½½åˆ†é…' },
                { id: 'HCMPL', name: 'HCMPLåä½œæœºåˆ¶', category: 'core', description: 'å±‚æ¬¡åŒ–å¤šæ™ºèƒ½ä½“åä½œåè®®' },
                { id: 'CALK', name: 'CALKå­¦ä¹ å†…æ ¸', category: 'core', description: 'åä½œæ„ŸçŸ¥å­¦ä¹ ä¸çŸ¥è¯†èåˆ' },

                // ATSLPç»„ä»¶
                { id: 'TaskDecomposition', name: 'ä»»åŠ¡åˆ†è§£å™¨', category: 'component', description: 'æ™ºèƒ½ä»»åŠ¡æ‹†åˆ†ä¸ä¾èµ–åˆ†æ' },
                { id: 'LoadBalancer', name: 'è´Ÿè½½å‡è¡¡å™¨', category: 'component', description: 'åŠ¨æ€èµ„æºåˆ†é…ä¸è°ƒåº¦' },
                { id: 'ResourceMonitor', name: 'èµ„æºç›‘æ§å™¨', category: 'component', description: 'å®æ—¶ç³»ç»ŸçŠ¶æ€ç›‘æµ‹' },
                { id: 'ScheduleOptimizer', name: 'è°ƒåº¦ä¼˜åŒ–å™¨', category: 'component', description: 'è‡ªé€‚åº”è°ƒåº¦ç­–ç•¥ä¼˜åŒ–' },

                // HCMPLç»„ä»¶
                { id: 'HierarchyManager', name: 'å±‚æ¬¡ç®¡ç†å™¨', category: 'component', description: 'å¤šå±‚çº§æ™ºèƒ½ä½“ç»„ç»‡æ¶æ„' },
                { id: 'CoordinationProtocol', name: 'åè°ƒåè®®', category: 'component', description: 'æ™ºèƒ½ä½“é—´é€šä¿¡ä¸åè°ƒ' },
                { id: 'ConflictResolver', name: 'å†²çªè§£å†³å™¨', category: 'component', description: 'æ™ºèƒ½ä½“å†²çªæ£€æµ‹ä¸è§£å†³' },
                { id: 'ConsensusEngine', name: 'å…±è¯†å¼•æ“', category: 'component', description: 'åˆ†å¸ƒå¼å†³ç­–å…±è¯†æœºåˆ¶' },

                // CALKç»„ä»¶
                { id: 'KnowledgeBase', name: 'çŸ¥è¯†åº“', category: 'component', description: 'åˆ†å¸ƒå¼çŸ¥è¯†å­˜å‚¨ä¸ç®¡ç†' },
                { id: 'LearningEngine', name: 'å­¦ä¹ å¼•æ“', category: 'component', description: 'åœ¨çº¿å­¦ä¹ ä¸æ¨¡å‹æ›´æ–°' },
                { id: 'ExperienceSharing', name: 'ç»éªŒå…±äº«', category: 'component', description: 'æ™ºèƒ½ä½“é—´ç»éªŒä¼ é€’' },
                { id: 'ModelFusion', name: 'æ¨¡å‹èåˆ', category: 'component', description: 'å¤šæ¨¡å‹çŸ¥è¯†é›†æˆ' },

                // æ™ºèƒ½ä½“å±‚
                { id: 'MasterAgent', name: 'ä¸»æ™ºèƒ½ä½“', category: 'agent', description: 'ç³»ç»Ÿçº§å†³ç­–ä¸åè°ƒ' },
                { id: 'WorkerAgent', name: 'å·¥ä½œæ™ºèƒ½ä½“', category: 'agent', description: 'å…·ä½“ä»»åŠ¡æ‰§è¡Œ' },
                { id: 'MonitorAgent', name: 'ç›‘æ§æ™ºèƒ½ä½“', category: 'agent', description: 'ç³»ç»Ÿç›‘æ§ä¸è¯Šæ–­' },
                { id: 'LearningAgent', name: 'å­¦ä¹ æ™ºèƒ½ä½“', category: 'agent', description: 'çŸ¥è¯†è·å–ä¸å…±äº«' },

                // æ¥å£å±‚
                { id: 'DSLParser', name: 'DSLè§£æå™¨', category: 'interface', description: 'é¢†åŸŸç‰¹å®šè¯­è¨€è§£æ' },
                { id: 'APIGateway', name: 'APIç½‘å…³', category: 'interface', description: 'å¤–éƒ¨æ¥å£ç»Ÿä¸€å…¥å£' },
                { id: 'MessageBroker', name: 'æ¶ˆæ¯ä»£ç†', category: 'interface', description: 'å¼‚æ­¥æ¶ˆæ¯ä¼ é€’' },
                { id: 'DataConnector', name: 'æ•°æ®è¿æ¥å™¨', category: 'interface', description: 'å¤–éƒ¨æ•°æ®æºé›†æˆ' },

                // æ•°æ®æµ
                { id: 'TaskQueue', name: 'ä»»åŠ¡é˜Ÿåˆ—', category: 'data', description: 'å¾…å¤„ç†ä»»åŠ¡ç¼“å­˜' },
                { id: 'ResultCache', name: 'ç»“æœç¼“å­˜', category: 'data', description: 'è®¡ç®—ç»“æœä¸´æ—¶å­˜å‚¨' },
                { id: 'LogStream', name: 'æ—¥å¿—æµ', category: 'data', description: 'ç³»ç»Ÿè¿è¡Œæ—¥å¿—' },
                { id: 'MetricsStore', name: 'æŒ‡æ ‡å­˜å‚¨', category: 'data', description: 'æ€§èƒ½æŒ‡æ ‡æ•°æ®' }
            ],
            links: [
                // æ ¸å¿ƒç®—æ³•é—´çš„å…³ç³»
                { source: 'ATSLP', target: 'HCMPL', type: 'coordinates' },
                { source: 'HCMPL', target: 'CALK', type: 'enhances' },
                { source: 'CALK', target: 'ATSLP', type: 'optimizes' },

                // ATSLPå†…éƒ¨è¿æ¥
                { source: 'ATSLP', target: 'TaskDecomposition', type: 'contains' },
                { source: 'ATSLP', target: 'LoadBalancer', type: 'contains' },
                { source: 'ATSLP', target: 'ResourceMonitor', type: 'contains' },
                { source: 'ATSLP', target: 'ScheduleOptimizer', type: 'contains' },
                { source: 'TaskDecomposition', target: 'LoadBalancer', type: 'feeds' },
                { source: 'ResourceMonitor', target: 'ScheduleOptimizer', type: 'informs' },

                // HCMPLå†…éƒ¨è¿æ¥
                { source: 'HCMPL', target: 'HierarchyManager', type: 'contains' },
                { source: 'HCMPL', target: 'CoordinationProtocol', type: 'contains' },
                { source: 'HCMPL', target: 'ConflictResolver', type: 'contains' },
                { source: 'HCMPL', target: 'ConsensusEngine', type: 'contains' },
                { source: 'HierarchyManager', target: 'CoordinationProtocol', type: 'manages' },
                { source: 'CoordinationProtocol', target: 'ConflictResolver', type: 'detects' },

                // CALKå†…éƒ¨è¿æ¥
                { source: 'CALK', target: 'KnowledgeBase', type: 'contains' },
                { source: 'CALK', target: 'LearningEngine', type: 'contains' },
                { source: 'CALK', target: 'ExperienceSharing', type: 'contains' },
                { source: 'CALK', target: 'ModelFusion', type: 'contains' },
                { source: 'LearningEngine', target: 'KnowledgeBase', type: 'updates' },
                { source: 'ExperienceSharing', target: 'ModelFusion', type: 'contributes' },

                // æ™ºèƒ½ä½“è¿æ¥
                { source: 'MasterAgent', target: 'HCMPL', type: 'uses' },
                { source: 'WorkerAgent', target: 'ATSLP', type: 'managed_by' },
                { source: 'LearningAgent', target: 'CALK', type: 'uses' },
                { source: 'MonitorAgent', target: 'ResourceMonitor', type: 'feeds' },

                // æ¥å£å±‚è¿æ¥
                { source: 'DSLParser', target: 'TaskDecomposition', type: 'provides' },
                { source: 'APIGateway', target: 'MasterAgent', type: 'routes_to' },
                { source: 'MessageBroker', target: 'CoordinationProtocol', type: 'facilitates' },
                { source: 'DataConnector', target: 'KnowledgeBase', type: 'feeds' },

                // æ•°æ®æµè¿æ¥
                { source: 'TaskQueue', target: 'LoadBalancer', type: 'supplies' },
                { source: 'ResultCache', target: 'ExperienceSharing', type: 'informs' },
                { source: 'LogStream', target: 'MonitorAgent', type: 'feeds' },
                { source: 'MetricsStore', target: 'ResourceMonitor', type: 'stores' }
            ]
        };

        let svg, width, height, simulation, tooltip;

        function initializeKnowledgeGraph() {
            // åˆ›å»ºSVGå’Œå·¥å…·æç¤º
            svg = d3.select("#knowledge-graph");
            const container = document.querySelector('.graph-container');
            width = container.clientWidth - 60;
            height = 600;

            svg.attr("width", width).attr("height", height);

            // åˆ›å»ºå·¥å…·æç¤º
            tooltip = d3.select('body').append('div')
                .attr('class', 'tooltip')
                .style('opacity', 0);

            // åˆå§‹åŒ–åŠ›å¯¼å‘å›¾
            showFullFramework();
        }

        function showFullFramework() {
            clearGraph();
            renderGraph(paperKnowledgeData);
        }

        function showATSLP() {
            const atslpData = {
                nodes: paperKnowledgeData.nodes.filter(n =>
                    n.id === 'ATSLP' ||
                    ['TaskDecomposition', 'LoadBalancer', 'ResourceMonitor', 'ScheduleOptimizer'].includes(n.id) ||
                    ['WorkerAgent', 'DSLParser', 'TaskQueue', 'MetricsStore'].includes(n.id)
                ),
                links: paperKnowledgeData.links.filter(l =>
                    paperKnowledgeData.nodes.filter(n =>
                        n.id === 'ATSLP' ||
                        ['TaskDecomposition', 'LoadBalancer', 'ResourceMonitor', 'ScheduleOptimizer'].includes(n.id) ||
                        ['WorkerAgent', 'DSLParser', 'TaskQueue', 'MetricsStore'].includes(n.id)
                    ).some(n => n.id === l.source || n.id === l.target)
                )
            };
            clearGraph();
            renderGraph(atslpData);
        }

        function showHCMPL() {
            const hcmplData = {
                nodes: paperKnowledgeData.nodes.filter(n =>
                    n.id === 'HCMPL' ||
                    ['HierarchyManager', 'CoordinationProtocol', 'ConflictResolver', 'ConsensusEngine'].includes(n.id) ||
                    ['MasterAgent', 'MessageBroker'].includes(n.id)
                ),
                links: paperKnowledgeData.links.filter(l =>
                    paperKnowledgeData.nodes.filter(n =>
                        n.id === 'HCMPL' ||
                        ['HierarchyManager', 'CoordinationProtocol', 'ConflictResolver', 'ConsensusEngine'].includes(n.id) ||
                        ['MasterAgent', 'MessageBroker'].includes(n.id)
                    ).some(n => n.id === l.source || n.id === l.target)
                )
            };
            clearGraph();
            renderGraph(hcmplData);
        }

        function showCALK() {
            const calkData = {
                nodes: paperKnowledgeData.nodes.filter(n =>
                    n.id === 'CALK' ||
                    ['KnowledgeBase', 'LearningEngine', 'ExperienceSharing', 'ModelFusion'].includes(n.id) ||
                    ['LearningAgent', 'DataConnector', 'ResultCache'].includes(n.id)
                ),
                links: paperKnowledgeData.links.filter(l =>
                    paperKnowledgeData.nodes.filter(n =>
                        n.id === 'CALK' ||
                        ['KnowledgeBase', 'LearningEngine', 'ExperienceSharing', 'ModelFusion'].includes(n.id) ||
                        ['LearningAgent', 'DataConnector', 'ResultCache'].includes(n.id)
                    ).some(n => n.id === l.source || n.id === l.target)
                )
            };
            clearGraph();
            renderGraph(calkData);
        }

        function clearGraph() {
            svg.selectAll("*").remove();
        }

        function renderGraph(data) {
            // é¢œè‰²æ˜ å°„
            const colorMap = {
                'core': '#3b82f6',
                'component': '#10b981',
                'agent': '#f59e0b',
                'interface': '#8b5cf6',
                'data': '#ef4444'
            };

            // åˆ›å»ºåŠ›å¯¼å‘ä»¿çœŸ
            simulation = d3.forceSimulation(data.nodes)
                .force("link", d3.forceLink(data.links).id(d => d.id).distance(100))
                .force("charge", d3.forceManyBody().strength(-300))
                .force("center", d3.forceCenter(width / 2, height / 2))
                .force("collision", d3.forceCollide().radius(35));

            // ç»˜åˆ¶è¿çº¿
            const link = svg.append("g")
                .selectAll("line")
                .data(data.links)
                .enter().append("line")
                .attr("class", "link")
                .style("stroke", "#999")
                .style("stroke-opacity", 0.6)
                .style("stroke-width", d => Math.sqrt(2));

            // ç»˜åˆ¶èŠ‚ç‚¹
            const node = svg.append("g")
                .selectAll("g")
                .data(data.nodes)
                .enter().append("g")
                .attr("class", "node")
                .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    .on("end", dragended));

            // æ·»åŠ åœ†å½¢èŠ‚ç‚¹
            node.append("circle")
                .attr("r", d => d.category === 'core' ? 25 : 18)
                .attr("fill", d => colorMap[d.category])
                .attr("stroke", "#fff")
                .attr("stroke-width", 2);

            // æ·»åŠ èŠ‚ç‚¹æ ‡ç­¾
            node.append("text")
                .attr("class", "node-text")
                .attr("dy", ".35em")
                .text(d => d.name.length > 8 ? d.name.substring(0, 6) + '..' : d.name)
                .style("font-size", d => d.category === 'core' ? '11px' : '9px');

            // æ·»åŠ äº¤äº’äº‹ä»¶
            node.on("mouseover", function(event, d) {
                tooltip.transition().duration(200).style("opacity", .9);
                tooltip.html(`<strong>${d.name}</strong><br/>${d.description}`)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", function(d) {
                tooltip.transition().duration(500).style("opacity", 0);
            });

            // æ›´æ–°ä»¿çœŸ
            simulation.on("tick", () => {
                link
                    .attr("x1", d => d.source.x)
                    .attr("y1", d => d.source.y)
                    .attr("x2", d => d.target.x)
                    .attr("y2", d => d.target.y);

                node.attr("transform", d => `translate(${d.x},${d.y})`);
            });

            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            updateStats(data);
        }

        function updateStats(data) {
            document.getElementById('total-nodes').textContent = data.nodes.length;
            document.getElementById('total-relations').textContent = data.links.length;
            document.getElementById('algorithm-count').textContent =
                data.nodes.filter(n => n.category === 'core').length;
            document.getElementById('complexity-score').textContent = '96%';
        }

        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        // çª—å£å¤§å°è°ƒæ•´å¤„ç†
        window.addEventListener('resize', function() {
            const container = document.querySelector('.graph-container');
            width = container.clientWidth - 60;
            svg.attr("width", width);
            simulation.force("center", d3.forceCenter(width / 2, height / 2));
            simulation.restart();
        });

        console.log('ğŸ§  è®ºæ–‡æ ¸å¿ƒçŸ¥è¯†å›¾è°±åŠ è½½å®Œæˆ');
        console.log('âœ¨ ATSLPã€HCMPLã€CALKæ¶æ„å¯è§†åŒ–å°±ç»ª');
    </script>
</body>
</html>